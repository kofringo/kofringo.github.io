<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zen Master Novels</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
        }
        .container {
            max-width: 1200px;
        }
    </style>
</head>
<body class="p-0">

    <header class="bg-[#243444] text-white p-4">
        <div class="container mx-auto flex justify-between items-center">
            <!-- Left section with logo and name -->
            <div class="flex items-center space-x-2">
                <img src="https://placehold.co/40x40/ffffff/000000?text=WN" alt="Web Novel Logo" class="rounded-lg">
                <span class="text-xl font-bold">Web NOVEL</span>
            </div>

            <!-- Middle section with nav links, hidden on small screens -->
            <nav class="hidden md:flex space-x-6">
                <!-- Dropdown for Novel List -->
                <div class="relative">
                    <button id="novel-list-dropdown-button" class="hover:text-gray-300">
                        Novel List
                        <svg class="w-4 h-4 inline-block ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div id="novel-list-menu" class="hidden absolute top-full left-0 mt-2 w-48 bg-[#243444] rounded-md shadow-lg py-1 z-10">
                        <a href="#" class="block px-4 py-2 text-sm text-white hover:bg-gray-700" id="novel-list-link">Latest Novels</a>
                        <a href="#" class="block px-4 py-2 text-sm text-white hover:bg-gray-700">Latest Release</a>
                        <a href="#" class="block px-4 py-2 text-sm text-white hover:bg-gray-700">Most Popular</a>
                        <a href="#" class="block px-4 py-2 text-sm text-white hover:bg-gray-700">Completed Novels</a>
                    </div>
                </div>
                <!-- Dropdown for Genres -->
                <div class="relative">
                    <button id="genres-dropdown-button" class="hover:text-gray-300">
                        Genres
                        <svg class="w-4 h-4 inline-block ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div id="genres-menu" class="hidden absolute top-full left-0 mt-2 w-48 bg-[#243444] rounded-md shadow-lg py-1 z-10">
                        <a href="#" class="block px-4 py-2 text-sm text-white hover:bg-gray-700 genres-link" data-genre="Action">Action</a>
                        <a href="#" class="block px-4 py-2 text-sm text-white hover:bg-gray-700 genres-link" data-genre="Adventure">Adventure</a>
                        <a href="#" class="block px-4 py-2 text-sm text-white hover:bg-gray-700 genres-link" data-genre="Cultivation">Cultivation</a>
                        <a href="#" class="block px-4 py-2 text-sm text-white hover:bg-gray-700 genres-link" data-genre="Fantasy">Fantasy</a>
                        <a href="#" class="block px-4 py-2 text-sm text-white hover:bg-gray-700 genres-link" data-genre="Magic">Magic</a>
                        <a href="#" class="block px-4 py-2 text-sm text-white hover:bg-gray-700 genres-link" data-genre="System">System</a>
                    </div>
                </div>
            </nav>

            <!-- Right section with icons and search -->
            <div class="flex items-center space-x-4">
                <a href="#" class="block md:hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </a>
                <button class="text-white hover:text-gray-300 hidden md:block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                </button>
                <div class="flex items-center bg-white rounded-md overflow-hidden">
                    <input type="text" placeholder="Search..." class="p-2 text-gray-800 focus:outline-none">
                    <button class="bg-[#F8A437] p-2 hover:bg-[#E08F22] transition-colors duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main id="home-view" class="container mx-auto p-4">
        <!-- Most Popular Section -->
        <section id="most-popular-section" class="my-8">
            <div class="flex justify-between items-center mb-4">
                <div>
                    <h2 class="text-2xl font-bold">Most Popular</h2>
                    <p class="text-gray-400">Popular Novels Selected by Users</p>
                </div>
                <button class="bg-[#4B0082] text-white px-4 py-2 rounded-md hover:bg-[#5E1A9D] transition-colors duration-300">
                    View More
                </button>
            </div>
            <div class="flex flex-nowrap overflow-x-auto space-x-6 pb-4">
                <!-- Novel cards will be injected here by JavaScript -->
            </div>
        </section>

        <!-- Recently Added Chapters Section -->
        <section id="recently-added-section" class="my-8">
            <div class="flex justify-between items-center mb-4">
                <div>
                    <h2 class="text-2xl font-bold">Recently Added Chapters</h2>
                    <p class="text-gray-400">Latest Translated Chapters</p>
                </div>
            </div>
            <div id="recent-chapters-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Recently added chapter cards will be injected here by JavaScript -->
            </div>
        </section>
    </main>
    
    <!-- Novel List View -->
    <div id="novel-list-view" class="container mx-auto p-4 hidden">
        <button id="back-to-home-button" class="text-blue-400 hover:text-blue-500 transition duration-300 ease-in-out font-medium mt-4">
            ‚Üê Back to Home
        </button>
        <div class="flex flex-col md:flex-row mt-6 space-x-0 md:space-x-8">
            <!-- Main novel list area -->
            <div class="w-full md:w-3/4">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold">LATEST NOVELS</h2>
                    <!-- Filter dropdown -->
                    <div class="relative inline-block text-left">
                        <div>
                            <button type="button" class="inline-flex justify-center w-full rounded-md border border-gray-700 shadow-sm px-4 py-2 bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none" id="menu-button" aria-expanded="true" aria-haspopup="true">
                                Latest Novels
                                <svg class="-mr-1 ml-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div id="all-novels-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- All novel cards will be injected here -->
                </div>
            </div>
            
            <!-- Right sidebar -->
            <div class="w-full md:w-1/4 mt-8 md:mt-0">
                <div class="bg-gray-800 p-4 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-4">GENRES</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white genres-link" data-genre="Action">Action</a></li>
                        <li><a href="#" class="hover:text-white genres-link" data-genre="Adventure">Adventure</a></li>
                        <li><a href="#" class="hover:text-white genres-link" data-genre="Cultivation">Cultivation</a></li>
                        <li><a href="#" class="hover:text-white genres-link" data-genre="Fantasy">Fantasy</a></li>
                        <li><a href="#" class="hover:text-white genres-link" data-genre="Magic">Magic</a></li>
                        <li><a href="#" class="hover:text-white genres-link" data-genre="System">System</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Genre View -->
    <div id="genre-view" class="container mx-auto p-4 hidden">
        <button id="back-to-home-from-genre" class="text-blue-400 hover:text-blue-500 transition duration-300 ease-in-out font-medium mt-4">
            ‚Üê Back to Home
        </button>
        <div class="flex flex-col md:flex-row mt-6 space-x-0 md:space-x-8">
            <div class="w-full md:w-3/4">
                <div class="flex justify-between items-center mb-4">
                    <h2 id="genre-view-title" class="text-2xl font-bold"></h2>
                </div>
                <div id="genre-novels-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- Genre-specific novels will be injected here -->
                </div>
            </div>
            <!-- Right sidebar -->
            <div class="w-full md:w-1/4 mt-8 md:mt-0">
                <div class="bg-gray-800 p-4 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-4">GENRES</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white genres-link" data-genre="Action">Action</a></li>
                        <li><a href="#" class="hover:text-white genres-link" data-genre="Adventure">Adventure</a></li>
                        <li><a href="#" class="hover:text-white genres-link" data-genre="Cultivation">Cultivation</a></li>
                        <li><a href="#" class="hover:text-white genres-link" data-genre="Fantasy">Fantasy</a></li>
                        <li><a href="#" class="hover:text-white genres-link" data-genre="Magic">Magic</a></li>
                        <li><a href="#" class="hover:text-white genres-link" data-genre="System">System</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>


    <div id="novel-detail-view" class="container mx-auto hidden">
        <button id="back-button" class="text-blue-400 hover:text-blue-500 transition duration-300 ease-in-out font-medium mt-4">
            ‚Üê Back to Novels
        </button>
        <div class="flex flex-col md:flex-row mt-6">
            <div id="novel-cover-container" class="md:w-1/3 flex justify-center md:justify-start">
                <!-- Cover image injected here -->
            </div>
            <div class="md:w-2/3 md:pl-8 mt-6 md:mt-0">
                <h2 id="novel-title" class="text-3xl font-bold text-gray-200"></h2>
                <p id="novel-author" class="text-lg text-gray-400 mt-2"></p>
                <div class="flex items-center mt-2">
                    <span class="text-yellow-400">‚òÖ</span>
                    <span id="novel-rating" class="ml-1 text-gray-300"></span>
                </div>
                <div id="novel-genres" class="mt-2 flex flex-wrap gap-2">
                    <!-- Genres injected here -->
                </div>
                <div class="mt-6">
                    <h3 class="text-2xl font-semibold text-gray-200">Chapters</h3>
                    <div id="chapters-list" class="mt-4 space-y-4">
                        <!-- Chapters list will be injected here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="chapter-view" class="container mx-auto hidden">
        <button id="back-to-novel-button" class="text-blue-400 hover:text-blue-500 transition duration-300 ease-in-out font-medium mt-4">
            ‚Üê Back to Novel
        </button>
        <h2 id="chapter-title" class="text-3xl font-bold text-gray-200 mt-6"></h2>
        <div id="chapter-content" class="mt-6 text-gray-300 leading-relaxed text-lg">
            <!-- Chapter content injected here -->
        </div>
    </div>

    <script>
        // Use a self-contained IIFE (Immediately Invoked Function Expression)
        (function() {
            const allNovelsData = [
                {
                    "id": "shattered-innocence",
                    "title": "Shattered Innocence",
                    "author": "Jane Doe",
                    "cover": "https://placehold.co/200x300/6A0DAD/ffffff?text=Shattered+Innocence",
                    "rating": 4.2,
                    "genre": ["Action", "Adventure"],
                    "chapters": [
                        {
                            "title": "Chapter 1: The Beginning",
                            "content": "<p>Roland had a very mature and beautiful mother. His mother, in turn, had a group of equally mature and alluring girlfriends. Most of these girlfriends had daughters around Roland‚Äôs age. So‚Ä¶<br>Concerned that her son was nearing adulthood without ever having been in a relationship, his mother cast a ‚Äúwicked‚Äù gaze upon her girlfriends. She planned a camping trip with the ultimate goal of finding her son a girlfriend. Roland, who had just spent the last three nights on a gaming binge, was forcefully shoved into the minivan.</p><p>The camping trip turned into a massive party, with mothers, girlfriends, and their beautiful daughters all competing to win Roland‚Äôs affection.<br>But Roland was not interested in any of them, as he had something far more powerful than love on his mind: The System.<br>After a quick bathroom break in the woods, Roland heard a faint beep from inside his head. ‚ÄúScanning‚Ä¶ Harem Ascension system detected. Loading system‚Ä¶<br>Loading successful. Welcome, host Roland.‚Äù</p>"
                        },
                        {
                            "title": "Chapter 2: The Quest",
                            "content": "<p>Roland‚Äôs eyes widened as a blue screen appeared in his vision, complete with buttons and icons that seemed to float in the air. The system‚Äôs voice was warm and inviting, but its words sent a shiver down his spine.<br>‚ÄúTo become the ultimate harem king, you must first complete the following quests. Quest 1: Gain the affections of a single woman. Quest 2: Gain the affections of three women.‚Äù<br>Roland couldn‚Äôt believe his luck. His mother had been trying to get him a girlfriend for years, and now he had a system that would help him do it. But this was no ordinary system. It was the Harem Ascension System, and its ultimate goal was to help him become the most powerful and desired man in the world. With this system, Roland was confident he would be able to conquer any woman he desired.</p>"
                        }
                    ]
                },
                {
                    "id": "circle-of-inevitability",
                    "title": "Circle of Inevitability",
                    "author": "John Smith",
                    "cover": "https://placehold.co/200x300/4B0082/ffffff?text=Circle+of+Inevitability",
                    "rating": 4.3,
                    "genre": ["Fantasy", "Action"],
                    "chapters": [
                        {
                            "title": "Chapter 1: The Prophecy",
                            "content": "<p>In a world where magic and mystery intertwined, a young mage named Elara was born with a unique destiny. The prophecies spoke of a great calamity, and she was the only one who could stop it. Her journey began in the ancient city of Veridian, where she sought to uncover the truth behind the Circle of Inevitability.</p>"
                        },
                        {
                            "title": "Chapter 2: The Guardian",
                            "content": "<p>Elara‚Äôs quest led her to a forbidden forest, where she encountered a fierce guardian. The guardian was a mystical creature with a heart of gold, and after a brief struggle, they became allies. Together, they continued their journey, facing new challenges and discovering ancient secrets.</p>"
                        }
                    ]
                },
                {
                    "id": "the-abyss",
                    "title": "The Abyss",
                    "author": "Jane Doe",
                    "cover": "https://placehold.co/200x300/1E90FF/ffffff?text=The+Abyss",
                    "rating": 5.0,
                    "genre": ["Magic", "Adventure"],
                    "chapters": [
                        {
                            "title": "Chapter 1: The Descent",
                            "content": "<p>The world's greatest adventurers knew of the Abyss, a chasm that led to an unknown dimension. It was said to be filled with unimaginable treasures and terrifying monsters. A young adventurer named Kael, driven by a desire for glory and wealth, decided to embark on a journey to the depths of the Abyss.</p>"
                        }
                    ]
                },
                {
                    "id": "another-world",
                    "title": "Another World",
                    "author": "John Smith",
                    "cover": "https://placehold.co/200x300/4B0082/ffffff?text=Another+World",
                    "rating": 4.5,
                    "genre": ["Fantasy", "System"],
                    "chapters": [
                        {
                            "title": "Chapter 1: The System",
                            "content": "<p>Alex, a normal high school student, suddenly found himself in another world. A mysterious voice echoed in his head, telling him he had been chosen by the \"System\". With this system, he could level up, learn new skills, and become the most powerful being in this new world.</p>"
                        }
                    ]
                },
                {
                    "id": "douluo-karmas",
                    "title": "Douluo: True and False Body of All Karmas",
                    "author": "Unknown",
                    "cover": "https://placehold.co/200x300/A020F0/ffffff?text=Douluo",
                    "rating": 4.0,
                    "genre": ["Fantasy", "Cultivation"],
                    "chapters": [
                        {
                            "title": "Chapter 153",
                            "content": "<p>The latest chapter in the Douluo series continues the journey of the protagonist as he faces new challenges and unlocks ancient powers. He must confront his past and forge a new path to true mastery.</p>"
                        }
                    ]
                },
                {
                    "id": "after-fifteen-years",
                    "title": "After fifteen years of cultivation, he finally reached the peak...",
                    "author": "Unknown",
                    "cover": "https://placehold.co/200x300/A020F0/ffffff?text=Cultivation",
                    "rating": 4.5,
                    "genre": ["Cultivation", "Action"],
                    "chapters": [
                        {
                            "title": "Chapter 169",
                            "content": "<p>After a long and arduous journey of cultivation, the protagonist finally reaches the pinnacle of his power. He faces a final trial that will determine his destiny and shape the fate of the cultivation world.</p>"
                        }
                    ]
                },
                {
                    "id": "hunyuan-immortal",
                    "title": "Hunyuan Immortal Sect",
                    "author": "Unknown",
                    "cover": "https://placehold.co/200x300/3CB371/ffffff?text=Hunyuan",
                    "rating": 4.1,
                    "genre": ["Fantasy", "Cultivation"],
                    "chapters": [
                        {
                            "title": "Chapter 340",
                            "content": "<p>The battle for the Hunyuan Immortal Sect reaches its climax. The protagonist must use all of his cunning and power to outwit his enemies and protect the sect from destruction. The fate of the sect hangs in the balance.</p>"
                        }
                    ]
                },
                {
                    "id": "zongwu-mastermind",
                    "title": "Zongwu: Aspiring to be the mastermind behind the world...",
                    "author": "Unknown",
                    "cover": "https://placehold.co/200x300/1E90FF/ffffff?text=Zongwu",
                    "rating": 4.8,
                    "genre": ["Strategy", "Fantasy"],
                    "chapters": [
                        {
                            "title": "Chapter 192",
                            "content": "<p>The mastermind's plan unfolds as he manipulates events from behind the scenes. The latest chapter reveals a shocking twist that will change the course of the world and test the limits of his genius.</p>"
                        }
                    ]
                },
                {
                    "id": "infinite-terror",
                    "title": "Infinite Terror: This Middle Continent is Rebellious",
                    "author": "Unknown",
                    "cover": "https://placehold.co/200x300/B22222/ffffff?text=Infinite",
                    "rating": 4.3,
                    "genre": ["Action", "Adventure"],
                    "chapters": [
                        {
                            "title": "Chapter 395",
                            "content": "<p>The rebellion on the Middle Continent escalates as the protagonist leads his forces against a tyrannical empire. The latest chapter is a thrilling battle of wits and power, with a surprising turn of events.</p>"
                        }
                    ]
                },
                {
                    "id": "kamen-rider",
                    "title": "Kamen Rider Senior Chat Group",
                    "author": "Unknown",
                    "cover": "https://placehold.co/200x300/A020F0/ffffff?text=Kamen",
                    "rating": 4.7,
                    "genre": ["Fantasy", "Comedy"],
                    "chapters": [
                        {
                            "title": "Chapter 301",
                            "content": "<p>The senior chat group gets into another hilarious situation as they try to solve a new crisis. This chapter is full of witty banter and unexpected twists, a perfect blend of comedy and action.</p>"
                        }
                    ]
                },
                {
                    "id": "training-the-heavens",
                    "title": "Training the Heavens",
                    "author": "Unknown",
                    "cover": "https://placehold.co/200x300/B22222/ffffff?text=Training",
                    "rating": 4.9,
                    "genre": ["Action", "Adventure"],
                    "chapters": [
                        {
                            "title": "Chapter 398",
                            "content": "<p>The protagonist's training journey continues as he faces a formidable challenge from a powerful opponent. This chapter delves deep into the essence of cultivation and the true meaning of power.</p>"
                        }
                    ]
                },
                {
                    "id": "longevity-in-two-worlds",
                    "title": "Longevity in Two Worlds: Double Pupils Are the Roa...",
                    "author": "Unknown",
                    "cover": "https://placehold.co/200x300/1E90FF/ffffff?text=Longevity",
                    "rating": 4.6,
                    "genre": ["Fantasy", "Adventure"],
                    "chapters": [
                        {
                            "title": "Chapter 219",
                            "content": "<p>The protagonist's mysterious 'double pupils' are revealed to have a hidden power that could change the fate of both worlds. He must learn to control this new ability while navigating a treacherous path filled with enemies and allies.</p>"
                        }
                    ]
                },
                {
                    "id": "the-cosmic-wanderer",
                    "title": "The Cosmic Wanderer",
                    "author": "A.I. Writer",
                    "cover": "https://placehold.co/200x300/4B0082/ffffff?text=Cosmic+Wanderer",
                    "rating": 4.8,
                    "genre": ["Science Fiction", "Adventure", "System"],
                    "chapters": [
                        {
                            "title": "Chapter 1: The First Jump",
                            "content": "<p>Zane, an orphan from a desolate planet, stumbles upon a sentient relic that grants him the ability to traverse the cosmos. With a system to guide his growth, he embarks on a journey to find his purpose among the stars and discover the truth of his past.</p>"
                        },
                        {
                            "title": "Chapter 2: The Void's Echo",
                            "content": "<p>His first jump through the void leads him to a derelict space station, where he encounters a strange alien life form. The system warns him of the dangers ahead, but his curiosity pushes him forward. Little does he know, this encounter will change the course of his journey forever.</p>"
                        }
                    ]
                }
            ];
            
            // This array holds the IDs of the novels you want to display in the "Most Popular" section
            const mostPopularNovelIds = [
                "shattered-innocence",
                "the-abyss",
                "kamen-rider",
                "zongwu-mastermind"
            ];
            
            // This array holds the IDs of the novels for the "Recently Added Chapters" section
            const recentlyAddedNovelIds = [
                "douluo-karmas",
                "after-fifteen-years",
                "hunyuan-immortal",
                "infinite-terror",
                "training-the-heavens",
                "longevity-in-two-worlds",
                "another-world",
                "the-cosmic-wanderer"
            ];


            const homeView = document.getElementById('home-view');
            const novelListView = document.getElementById('novel-list-view');
            const genreView = document.getElementById('genre-view');
            const novelsContainer = document.querySelector('#most-popular-section .flex-nowrap');
            const recentChaptersContainer = document.getElementById('recent-chapters-grid');
            const novelDetailView = document.getElementById('novel-detail-view');
            const chapterView = document.getElementById('chapter-view');
            const allNovelsGrid = document.getElementById('all-novels-grid');
            const genreNovelsGrid = document.getElementById('genre-novels-grid');
            const genreViewTitle = document.getElementById('genre-view-title');

            function showPage(page) {
                homeView.classList.add('hidden');
                novelListView.classList.add('hidden');
                genreView.classList.add('hidden');
                novelDetailView.classList.add('hidden');
                chapterView.classList.add('hidden');

                if (page === 'home') {
                    homeView.classList.remove('hidden');
                } else if (page === 'novel-list') {
                    novelListView.classList.remove('hidden');
                    renderAllNovelCards();
                } else if (page === 'genre') {
                    genreView.classList.remove('hidden');
                }
            }

            function getNovelById(id) {
                return allNovelsData.find(novel => novel.id === id);
            }
            
            function showNovelDetail(novel) {
                homeView.classList.add('hidden');
                novelListView.classList.add('hidden');
                genreView.classList.add('hidden');
                novelDetailView.classList.remove('hidden');
                chapterView.classList.add('hidden');

                document.getElementById('novel-title').textContent = novel.title;
                document.getElementById('novel-author').textContent = `by ${novel.author}`;
                document.getElementById('novel-rating').textContent = novel.rating;

                const coverContainer = document.getElementById('novel-cover-container');
                coverContainer.innerHTML = `<img src="${novel.cover}" alt="${novel.title} Cover" class="rounded-lg shadow-lg">`;

                const genresContainer = document.getElementById('novel-genres');
                genresContainer.innerHTML = ''; // Clear existing genres
                novel.genre.forEach(g => {
                    const genreLink = document.createElement('a');
                    genreLink.href = '#';
                    genreLink.textContent = g;
                    genreLink.classList.add('bg-gray-700', 'text-gray-300', 'text-xs', 'font-semibold', 'px-2.5', 'py-0.5', 'rounded-full', 'genres-link', 'hover:text-white');
                    genreLink.setAttribute('data-genre', g);
                    genresContainer.appendChild(genreLink);
                });

                const chaptersList = document.getElementById('chapters-list');
                chaptersList.innerHTML = '';
                novel.chapters.forEach((chapter) => {
                    const chapterItem = document.createElement('div');
                    chapterItem.className = 'bg-gray-800 p-4 rounded-lg cursor-pointer hover:bg-gray-700 transition duration-300 ease-in-out';
                    chapterItem.innerHTML = `<h4 class="text-xl font-medium">${chapter.title}</h4>`;
                    chapterItem.addEventListener('click', () => showChapter(novel, chapter));
                    chaptersList.appendChild(chapterItem);
                });

                document.getElementById('back-button').onclick = () => showPage('novel-list');
            }

            function showChapter(novel, chapter) {
                novelDetailView.classList.add('hidden');
                chapterView.classList.remove('hidden');

                document.getElementById('chapter-title').textContent = chapter.title;
                document.getElementById('chapter-content').innerHTML = chapter.content;

                document.getElementById('back-to-novel-button').onclick = () => showNovelDetail(novel);
            }

            function createNovelCard(novel) {
                const card = document.createElement('div');
                card.className = 'flex-none w-48 bg-gray-800 rounded-lg shadow-lg overflow-hidden cursor-pointer hover:scale-105 transition-transform duration-300 ease-in-out';
                card.innerHTML = `
                    <img src="${novel.cover}" alt="${novel.title} Cover" class="w-full h-auto object-cover rounded-t-lg">
                    <div class="p-4">
                        <h3 class="text-lg font-semibold text-gray-200 truncate">${novel.title}</h3>
                        <p class="text-gray-400 text-sm mt-1">by ${novel.author}</p>
                        <div class="flex items-center mt-2">
                            <span class="text-yellow-400">‚òÖ</span>
                            <span class="ml-1 text-gray-300">${novel.rating}</span>
                        </div>
                    </div>
                `;
                card.addEventListener('click', () => showNovelDetail(novel));
                return card;
            }

            function renderNovelCards() {
                novelsContainer.innerHTML = '';
                const popularNovels = allNovelsData.filter(novel => mostPopularNovelIds.includes(novel.id));
                popularNovels.forEach(novel => {
                    const card = createNovelCard(novel);
                    novelsContainer.appendChild(card);
                });
            }

            function renderRecentChapters() {
                recentChaptersContainer.innerHTML = '';
                const recentChapters = allNovelsData.filter(novel => recentlyAddedNovelIds.includes(novel.id));
                recentChapters.forEach(novel => {
                    const card = document.createElement('div');
                    card.className = 'flex flex-row bg-gray-800 rounded-lg shadow-lg overflow-hidden p-2 cursor-pointer hover:bg-gray-700 transition duration-300 ease-in-out';
                    card.innerHTML = `
                        <img src="${novel.cover}" alt="${novel.title} Cover" class="w-16 h-16 rounded-lg mr-4">
                        <div class="flex flex-col justify-center">
                            <h4 class="text-lg font-semibold truncate text-gray-200">${novel.title}</h4>
                            <div class="flex items-center space-x-2 text-gray-400 text-sm mt-1">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                <span>9 hours ago</span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.483 9.382 5 7.82 5M12 6.253c1.168-.27 2.618-.753 4.18-.753m-4.18 0v13m0-13a9 9 0 100 18A9 9 0 0012 6.253z" />
                                </svg>
                                <span>Chapter ${novel.chapters[0].title.split(':')[1].trim()}</span>
                            </div>
                        </div>
                    `;
                    card.addEventListener('click', () => {
                        const selectedNovel = getNovelById(novel.id);
                        if (selectedNovel) {
                            showNovelDetail(selectedNovel);
                        }
                    });
                    recentChaptersContainer.appendChild(card);
                });
            }
            
            function renderAllNovelCards() {
                allNovelsGrid.innerHTML = ''; // Clear previous cards
                allNovelsData.forEach(novel => {
                    const card = createNovelCard(novel);
                    // Adjust card width for grid layout
                    card.classList.remove('flex-none', 'w-48');
                    allNovelsGrid.appendChild(card);
                });
            }

            function renderGenreNovels(genre) {
                genreNovelsGrid.innerHTML = ''; // Clear previous cards
                const filteredNovels = allNovelsData.filter(novel => novel.genre.includes(genre));
                genreViewTitle.textContent = `${genre.toUpperCase()} NOVELS`;
                
                filteredNovels.forEach(novel => {
                    const card = createNovelCard(novel);
                    card.classList.remove('flex-none', 'w-48');
                    genreNovelsGrid.appendChild(card);
                });
            }

            // Event listener for the novel list link
            document.getElementById('novel-list-link').addEventListener('click', (e) => {
                e.preventDefault();
                showPage('novel-list');
            });
            document.getElementById('back-to-home-button').addEventListener('click', () => {
                showPage('home');
            });
            document.getElementById('back-to-home-from-genre').addEventListener('click', () => {
                showPage('home');
            });
            
            // New functionality for click-to-toggle dropdown menu
            const novelListDropdownButton = document.getElementById('novel-list-dropdown-button');
            const novelListMenu = document.getElementById('novel-list-menu');
            
            novelListDropdownButton.addEventListener('click', (event) => {
                event.stopPropagation(); // Prevents the document click listener from immediately closing the menu
                novelListMenu.classList.toggle('hidden');
                // Ensure other menus are closed
                document.getElementById('genres-menu').classList.add('hidden');
            });
            
            const genresDropdownButton = document.getElementById('genres-dropdown-button');
            const genresMenu = document.getElementById('genres-menu');

            genresDropdownButton.addEventListener('click', (event) => {
                event.stopPropagation(); // Prevents the document click listener from immediately closing the menu
                genresMenu.classList.toggle('hidden');
                // Ensure other menus are closed
                novelListMenu.classList.add('hidden');
            });
            
            // Delegated event listener for all genre links
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('genres-link')) {
                    e.preventDefault();
                    const genre = e.target.getAttribute('data-genre');
                    showPage('genre');
                    renderGenreNovels(genre);
                    // Hide any open dropdown menus
                    novelListMenu.classList.add('hidden');
                    genresMenu.classList.add('hidden');
                }
            });

            // Close the dropdowns if the user clicks outside of them
            document.addEventListener('click', (event) => {
                if (!novelListMenu.contains(event.target) && !novelListDropdownButton.contains(event.target)) {
                    novelListMenu.classList.add('hidden');
                }
                if (!genresMenu.contains(event.target) && !genresDropdownButton.contains(event.target)) {
                    genresMenu.classList.add('hidden');
                }
            });

            // Initial render
            renderNovelCards();
            renderRecentChapters();
        })();
    </script>
</body>
</html>
